<%- include('partials/head') %>

    <!-- Hero Section -->
    <section class="hero hero-page">
        <div class="hero-overlay"></div>
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title fade-in"><%= t.events.page_title || 'Ã‰vÃ©nements & ActualitÃ©s' %></h1>
                <p class="hero-subtitle fade-in"><%= t.events.page_subtitle || 'DÃ©couvrez nos prochains Ã©vÃ©nements et les derniÃ¨res actualitÃ©s' %></p>
            </div>
        </div>
    </section>

    <!-- Ã‰vÃ©nements Ã  venir Section -->
    <section class="section events-page-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ðŸŽ‰ <%= t.events.upcoming_events || 'Ã‰vÃ©nements Ã  venir' %></h2>
                <p class="section-subtitle"><%= t.events.upcoming_events_desc || 'ConfÃ©rences, cÃ©rÃ©monies et Ã©vÃ©nements spÃ©ciaux' %></p>
            </div>

            <% if (upcomingEvents.length > 0) { %>
                <div class="events-grid">
                    <% upcomingEvents.forEach(event => { %>
                        <article class="event-card">
                            <div class="event-card-image">
                                <img src="<%= event.images && event.images.length > 0 ? event.images[0] : '/images/default-event.jpg' %>" alt="<%= event.title %>">
                                <div class="event-card-category"><%= event.category %></div>
                            </div>
                            <div class="event-card-content">
                                <div class="event-card-date">
                                    <i class="far fa-calendar"></i>
                                    <%= new Date(event.date).toLocaleDateString(currentLang === 'tr' ? 'tr-TR' : 'fr-FR', { 
                                        weekday: 'long', 
                                        year: 'numeric', 
                                        month: 'long', 
                                        day: 'numeric' 
                                    }) %>
                                </div>
                                <h3 class="event-card-title"><%= event.title %></h3>
                                <div class="event-card-meta">
                                    <span><i class="far fa-clock"></i> <%= event.start_time %> - <%= event.end_time %></span>
                                    <span><i class="fas fa-map-marker-alt"></i> <%= event.location %></span>
                                </div>
                                <p class="event-card-description"><%= event.description %></p>
                                <button class="btn btn-primary event-details-btn" data-event-id="<%= event.id %>">
                                    <%= t.events.see_details || 'Voir les dÃ©tails' %>
                                </button>
                            </div>
                        </article>
                    <% }); %>
                </div>
            <% } else { %>
                <div class="no-events">
                    <i class="far fa-calendar-times"></i>
                    <p><%= t.events.no_events || 'Aucun Ã©vÃ©nement Ã  venir pour le moment' %></p>
                </div>
            <% } %>
        </div>
    </section>

    <!-- ActualitÃ©s Section -->
    <section class="section activities-page-section" style="background: #f7fafc;">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ðŸ“° ActualitÃ©s</h2>
                <p class="section-subtitle">Les derniÃ¨res nouvelles de la mosquÃ©e</p>
            </div>

            <% if (news.length > 0) { %>
                <div class="events-grid">
                    <% news.forEach(article => { %>
                        <article class="event-card">
                            <div class="event-card-image">
                                <% 
                                    let newsImage = '/images/default-event.jpg';
                                    if (article.images && article.images.length > 0) {
                                        newsImage = article.images[0];
                                    } else if (article.image) {
                                        newsImage = article.image;
                                    }
                                %>
                                <img src="<%= newsImage %>" alt="<%= article.title %>">
                                <div class="event-card-category"><%= article.category %></div>
                            </div>
                            <div class="event-card-content">
                                <div class="event-card-date">
                                    <i class="far fa-calendar"></i>
                                    <%= new Date(article.createdAt).toLocaleDateString(currentLang === 'tr' ? 'tr-TR' : 'fr-FR', { 
                                        year: 'numeric', 
                                        month: 'long', 
                                        day: 'numeric' 
                                    }) %>
                                </div>
                                <h3 class="event-card-title"><%= article.title %></h3>
                                <p class="event-card-description"><%= article.content ? article.content.substring(0, 150) : '' %>...</p>
                                <button class="btn btn-primary news-details-btn" data-news-id="<%= article.id %>">
                                    Lire la suite
                                </button>
                            </div>
                        </article>
                    <% }); %>
                </div>
            <% } else { %>
                <div class="no-events">
                    <i class="far fa-newspaper"></i>
                    <p>Aucune actualitÃ© pour le moment</p>
                </div>
            <% } %>
        </div>
    </section>

    <!-- Ã‰vÃ©nements passÃ©s Section -->
    <% if (pastEvents.length > 0) { %>
    <section class="section events-page-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ðŸ“… Ã‰vÃ©nements passÃ©s</h2>
                <p class="section-subtitle">Retour sur nos Ã©vÃ©nements rÃ©cents</p>
            </div>

            <div class="events-grid">
                <% pastEvents.slice(0, 6).forEach(event => { %>
                    <article class="event-card" style="opacity: 0.85;">
                        <div class="event-card-image">
                            <img src="<%= event.images && event.images.length > 0 ? event.images[0] : '/images/default-event.jpg' %>" alt="<%= event.title %>">
                            <div class="event-card-category" style="background: #718096;"><%= event.category %></div>
                        </div>
                        <div class="event-card-content">
                            <div class="event-card-date">
                                <i class="far fa-calendar"></i>
                                <%= new Date(event.date).toLocaleDateString(currentLang === 'tr' ? 'tr-TR' : 'fr-FR', { 
                                    weekday: 'long', 
                                    year: 'numeric', 
                                    month: 'long', 
                                    day: 'numeric' 
                                }) %>
                            </div>
                            <h3 class="event-card-title"><%= event.title %></h3>
                            <div class="event-card-meta">
                                <span><i class="far fa-clock"></i> <%= event.start_time %> - <%= event.end_time %></span>
                                <span><i class="fas fa-map-marker-alt"></i> <%= event.location %></span>
                            </div>
                            <p class="event-card-description"><%= event.description %></p>
                            <button class="btn btn-primary event-details-btn" data-event-id="<%= event.id %>">
                                <%= t.events.see_details || 'Voir les dÃ©tails' %>
                            </button>
                        </div>
                    </article>
                <% }); %>
            </div>
        </div>
    </section>
    <% } %>

    <%- include('partials/footer') %>
    <%- include('partials/foot') %>
